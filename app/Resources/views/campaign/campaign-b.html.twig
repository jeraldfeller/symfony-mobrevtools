 {% extends 'base.html.twig' %}
{% block stylesheets %}
    <link href="{{ asset('assets/global/plugins/select2/css/select2.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/select2/css/select2-bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/clockface/css/clockface.css') }}" rel="stylesheet" type="text/css" />

{% endblock %}
{% block nav %}
    {{ render(controller(
    'AppBundle:Navmenu:getNavmenu'
    )) }}
{% endblock %}
{% block body %}
    <h1 class="page-title"> {{ page }}

    </h1>
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <i class="icon-home"></i>
                <a href="/">Home</a>
                <i class="fa fa-angle-right"></i>
            </li>

            <li>
                <span>Reports</span>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <span>Campaign</span>
                <i class="fa fa-angle-right"></i>
            </li>
            <li>
                <span>{{ page }}</span>
            </li>

        </ul>
        <div class="page-toolbar">
            <div class="btn-group pull-right">
                <button type="button" class="btn btn-fit-height grey-salt dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true"> Actions
                    <i class="fa fa-angle-down"></i>
                </button>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li>
                        <a href="#">
                            <i class="icon-bell"></i> Action</a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="icon-shield"></i> Another action</a>
                    </li>
                    <li>
                        <a href="#">
                            <i class="icon-user"></i> Something else here</a>
                    </li>
                    <li class="divider"> </li>
                    <li>
                        <a href="#">
                            <i class="icon-bag"></i> Separated link</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- END PAGE HEADER-->
    <div class="row">
        <div class="col-lg-12">
            <div class="portlet light">
                <div class="portlet-title">
                    <div class="caption font-green-sharp">
                        <i class="fa fa-bullhorn font-green-sharp"></i>
                        <span class="caption-subject bold uppercase" id="campaignTitleName">Campaign Name</span>
                        <input type="hidden" id="campaignGroupId">
                        <input type="hidden" id="campaignId">
                        <input type="hidden" id="voluumId">
                    </div>
                    <div class="actions">
                        <a href="javascript:;" class="btn btn-circle btn-primary" id="importCampaignBtn">
                            <i class="fa fa-cloud-download"></i> Import </a>
                        <a href="javascript:;" class="btn btn-circle btn-danger spinnerBtn ladda-button" id="deleteCampaignBtn" data-style="expand-right" data-size="l" disabled>
                            <span class="ladda-label"><i class="fa fa-trash"></i> Delete </span></a>
                        <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;"> </a>

                        <!-- Import Modal -->
                        <div class="modal fade" id="import-modal" role="basic" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4>Importing Campaigns</h4>
                                    </div>
                                    <div class="modal-body" id="displayCampaignToImport">
                                        <img src="{{ asset('assets/global/img/loading-spinner-grey.gif') }}" alt="" class="loading">
                                        <span> &nbsp;&nbsp;Loading... </span>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
                                        <button type="button" id="importCampaignBtnSave"  class="btn blue ladda-button spinnerBtn" data-style="expand-right" data-size="l"><span class="ladda-label"><i class="fa fa-save"></i> Save</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div id="delete-modal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog modal-md">
                                <div class="modal-content">

                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span>
                                        </button>
                                        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-alert"></i> Warning</h4>
                                    </div>
                                    <div class="modal-body">
                                        <h4>Are you sure do want to delete <span id="campaignToDelete"></span>?</h4>

                                    </div>
                                    <div class="modal-footer">

                                        <button type="button" name="deleteCampaignBtnSubmit" id="deleteCampaignBtnSave" class="btn btn-danger spinnerBtn ladda-button" data-style="expand-right" data-size="l"><span class="lada-label">  Delete</span></button>

                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- end modal -->
                    </div>
                </div>

                <div class="portlet-body">

                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-3 col-xs-12">

                                <select id="selectCampaign" class="select2_single form-control" tabindex="-1" name="campaign">
                                    <option></option>
                                    {% for campaign in campaigns %}
                                        <option data-geo="{{ campaign.geo }}" value="{{ campaign.id }}">{{ campaign.campName }}</option>
                                    {% endfor  %}
                                </select>
                            </div>

                            <div class="col-md-3 col-xs-12">
                                <div class="input-group">
                                    <select id="selectAddGroup" class="select2" tabindex="-1" name="campaign">
                                        <option></option>
                                        {% for group in groups %}
                                            <option value="{{ group.id }}">{{ group.groupName }}</option>
                                        {% endfor  %}
                                    </select>
                                    <span style="cursor:pointer;" class="add-on input-group-addon label-info" id="addGroupBtn"><i style="color: #fff;" class="glyphicon glyphicon-plus"></i></span>
                                    <span style="cursor:pointer;" class="add-on input-group-addon label-warning" id="removeGroupBtn"><i style="color: #fff;" class="glyphicon glyphicon-remove"></i></span>
                                </div>
                            </div>
                            <div class="col-md-3 col-xs-12">
                                <div class="input-group">
                                    <select id="selectAddVertical" class="select2" tabindex="-1">
                                        <option></option>
                                        {% for vertical in verticals %}
                                            <option value="{{ vertical.id }}">{{ vertical.verticalName }}</option>
                                        {% endfor  %}
                                    </select>
                                    <span style="cursor:pointer;" class="add-on input-group-addon label-info" id="addVerticalBtn"><i style="color: #fff;" class="glyphicon glyphicon-plus"></i></span>
                                    <span style="cursor:pointer;" class="add-on input-group-addon label-warning" id="removeVerticalBtn"><i style="color: #fff;" class="glyphicon glyphicon-remove"></i></span>
                                </div>
                            </div>

                            <div class="col-md-2 col-xs-12">
                                <div class="input-prepend input-group">
                                    <span class="add-on input-group-addon"><i class="glyphicon glyphicon-globe"></i></span>
                                    <input type="text" class="form-control" name="geo" id="campGeo" disabled>
                                </div>

                            </div>

                            <div class="col-md-1 col-xs-12">
                                <button id="campaignGroupBtn" class="btn blue spinnerBtn ladda-button"  data-style="expand-right" data-size="l" disabled> <span class="ladda-label"><i class="fa fa-pencil"></i> Save </span></button>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div id="rulesDivContainer">
                            <!-- BEGIN Portlet PORTLET-->
                            <!-- Bot Rules -->
                            {% if page == 'ExoClick' %}
                            <div class="row">
                                <div class="col-md-12">
                                    {% endif %}
                                    <div class="col-lg-4">
                                        <div class="portlet box blue">
                                            <div class="portlet-title">
                                                <div class="caption">
                                                    Bot Rules
                                                </div>
                                                <div class="tools">

                                                    <a href="" class="fullscreen"> </a>
                                                </div>
                                                <div class="actions">
                                                    <div class="switch-wrapper pull-right">

                                                        <input type="checkbox" class="make-switch" data-size="mini" data-on-color="success" data-size="mini" data-off-color="danger" data-on-text="ON" data-off-text="OFF" type="checkbox" value="1" name="bot-active-switch" id="bot-active-switch" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="portlet-body">

                                                <div class="scroller" style="height:350px" data-rail-visible="1" data-rail-color="blue" data-handle-color="red">

                                                    <table style="border-spacing: 10px; border-collapse: separate;">
                                                        <tbody id="appendRuleSetBot"></tbody>

                                                        <tr>

                                                        </tr>
                                                        <tr>
                                                            <td colspan="2"><button class="btn btn-info btn-xs" id="appendRuleSetBotBtn" disabled><i class="fa fa-plus"></i> Add Ruleset</button></td>
                                                        </tr>




                                                        </tbody>

                                                    </table>

                                                    <hr>

                                                    <div class="form-group">

                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="botRulesDatePicker">Start from:</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                                <input type="text" value="{{ dateNow }}" class="form-control date-picker" placeholder="mm/dd/yyyy" id="botRulesDatePicker">
                                                            </div><!-- input-group -->
                                                        </div>

                                                        <div class="col-md-5 col-sm-6 col-xs-12 pull-right">
                                                            <label style="font-weight: normal;" for="botRulesDatePicker">&nbsp;</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                                                                <input id="botRulesTimePicker" type="text" class="form-control timepicker timepicker-24" disabled/>
                                                            </div><!-- input-group -->
                                                        </div>

                                                        <form>
                                                            <div class="col-md-7 col-sm-6 col-xs-12">
                                                                <label style="font-weight: normal;" for="chooseTimeFormat1">Frequency:</label>
                                                                <br>
                                                                <div class="input-group col-lg-12">
                                                                    Hours:
                                                                    <input type="radio" name="chooseTimeFormat" id="chooseTimeFormat1" value="hour" disabled>
                                                                    Minutes:
                                                                    <input type="radio" name="chooseTimeFormat" id="chooseTimeFormat2" value="minutes" checked="checked" disabled>

                                                                    <input type="text" class="form-control" id="botRulesFrequency" value="5" onkeypress="return isNumberKey(event)" disabled>

                                                                </div><!-- input-group -->
                                                            </div>
                                                        </form>
                                                    </div>





                                                    <div class="col-md-12">
                                                        <hr>
                                                        <input type="hidden" id="ajaxAppenedReturnRuleSetCountBot">
                                                        <input type="hidden" id="ajaxAppenedReturnConditionstCountBot">
                                                        <button class="btn btn-info btn-md pull-right spinnerBtn ladda-button" id="botRulesSubmitBtn" disabled data-style="expand-right" data-size="l"><i class="fa fa-pencil"></i> <span class="ladda-label">Save </span> </button>

                                                    </div>


                                                </div>
                                            </div>

                                        </div>
                                    </div><!-- end bot rules -->

                                    <!-- Blacklist Rules -->
                                    <div class="col-lg-4">
                                        <div class="portlet box blue">
                                            <div class="portlet-title">
                                                <div class="caption">
                                                    Blacklisting Rules
                                                </div>
                                                <div class="tools">

                                                    <a href="" class="fullscreen"> </a>
                                                </div>
                                                <div class="actions">
                                                    <div class="switch-wrapper pull-right">

                                                        <input type="checkbox" class="make-switch" data-size="mini" data-on-color="success" data-size="mini" data-off-color="danger" data-on-text="ON" data-off-text="OFF" type="checkbox" value="1" name="bot-active-switch" id="blacklist-active-switch" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="portlet-body">

                                                <div class="scroller" style="height:350px" data-rail-visible="1" data-rail-color="blue" data-handle-color="red">

                                                    <table style="border-spacing: 10px; border-collapse: separate;">
                                                        <tr>
                                                            <td colspan="2" style="width: 10%; vertical-align: middle; text-align: left;">

                                                                <input type="radio" name="blacklistRadioOption" value="1" id="blacklistRadioOption1" checked disabled> Pause
                                                                <input type="radio"  name="blacklistRadioOption" value="1" id="blacklistRadioOption2" disabled> Unpause

                                                            </td>
                                                        </tr>
                                                        <tbody id="appendRuleSetBlacklist"></tbody>

                                                        <tr>

                                                        </tr>
                                                        <tr>
                                                            <td colspan="2"><button class="btn btn-info btn-xs" id="appendRuleSetBlacklistBtn" disabled><i class="fa fa-plus"></i> Add Ruleset</button></td>
                                                        </tr>




                                                        </tbody>

                                                    </table>
                                                    <hr>

                                                    <div class="form-group">

                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="blacklistDatePicker">Start from:</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                                <input type="text" value="{{ dateNow }}" class="form-control date-picker" placeholder="mm/dd/yyyy" id="blacklistDatePicker" disabled>
                                                            </div><!-- input-group -->
                                                        </div>


                                                        <div class="col-md-5 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for=blacklistDatePicker">&nbsp;</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                                                                <input id="blacklistTimePicker" type="text" class="form-control timepicker timepicker-24" disabled/>
                                                            </div><!-- input-group -->
                                                        </div>

                                                        <br>
                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="blacklistChooseTimeFormat1">Frequency:</label>
                                                            <br>
                                                            <div class="input-group col-lg-12">
                                                                Hours:
                                                                <input type="radio" name="chooseTimeFormat" id="blacklistChooseTimeFormat1" value="hour" disabled>
                                                                Minutes:
                                                                <input type="radio" name="chooseTimeFormat" id="blacklistChooseTimeFormat2" value="minutes" checked disabled>

                                                                <input type="text" class="form-control" id="blacklistFrequency" value="5" onkeypress="return isNumberKey(event)" disabled>

                                                            </div><!-- input-group -->
                                                        </div>
                                                    </div>


                                                    <div class="col-md-12">
                                                        <hr>
                                                        <input type="hidden" id="ajaxAppenedReturnRuleSetCountBlacklist">
                                                        <input type="hidden" id="ajaxAppenedReturnConditionstCountBlacklist">
                                                        <button class="btn btn-info btn-md pull-right spinnerBtn ladda-button" id="blacklistSubmitBtn" data-style="expand-right" data-size="l" disabled><i class="fa fa-pencil"></i><span class="ladda-label"> Save </span> </button>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div><!-- end blacklist rules -->


                                    {% if page == 'ExoClick' %}

                                        <!-- Bid Rules -->
                                        <div class="col-lg-4">
                                            <div class="portlet box blue">
                                                <div class="portlet-title">
                                                    <div class="caption">
                                                        Ip Blacklist
                                                    </div>
                                                    <div class="tools">

                                                        <a href="" class="fullscreen"> </a>
                                                    </div>
                                                    <div class="actions">
                                                        <div class="switch-wrapper pull-right">

                                                            <input type="checkbox" class="make-switch" data-size="mini" data-on-color="success" data-size="mini" data-off-color="danger" data-on-text="ON" data-off-text="OFF" type="checkbox" value="1" name="bot-active-switch" id="ip-active-switch" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="portlet-body">

                                                    <div class="scroller" style="height:350px" data-rail-visible="1" data-rail-color="blue" data-handle-color="red">

                                                        <table style="border-spacing: 10px; border-collapse: separate; width:100%;">
                                                            <tbody id="appendRuleSetIp"></tbody>

                                                            <tr>
                                                                <td colspan="2" style="width:100%;"><button class="btn btn-info btn-xs" style="cursor: pointer;" onClick="appendConditionsIp(this)"  id="appendRuleSetIpBtn" disabled><i class="fa fa-plus"></i> Add Condition</button></td>
                                                            </tr>

                                                        </table>

                                                        <hr>
                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="ipChooseTimeFormat">Frequency:</label>
                                                            <br>
                                                            <div class="input-group col-lg-12">
                                                                Hours:
                                                                <input type="radio" name="chooseTimeFormat" id="ipChooseTimeFormat1" value="hour" disabled>
                                                                Minutes:
                                                                <input type="radio" name="chooseTimeFormat" id="ipChooseTimeFormat2" value="minutes" checked disabled>

                                                                <input type="text" class="form-control" id="ipRulesFrequency" value="5" onkeypress="return isNumberKey(event)" disabled>

                                                            </div><!-- input-group -->
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <hr>
                                                                <input type="hidden" id="ajaxAppenedReturnConditionsCountIp">
                                                                <button class="btn btn-info btn-md pull-right spinnerBtn ladda-button" id="ipRulesSubmitBtn" data-style="expand-right" data-size="l" disabled ><i class="fa fa-pencil"></i> <span class="ladda-label">Save </span> </button>

                                                            </div>
                                                        </div>



                                                    </div>
                                                </div>

                                            </div>
                                        </div><!-- end bid adjustment rules -->

                                    {% endif %}

                                    <!-- Bid Rules -->
                                    <div class="col-lg-4" style="display: none;">
                                        <div class="portlet box blue">
                                            <div class="portlet-title">
                                                <div class="caption">
                                                    Bid Adjustment Rules
                                                </div>
                                                <div class="tools">

                                                    <a href="" class="fullscreen"> </a>
                                                </div>
                                                <div class="actions">
                                                    <div class="switch-wrapper pull-right">

                                                        <input type="checkbox" class="make-switch" data-size="mini" data-on-color="success" data-size="mini" data-off-color="danger" data-on-text="ON" data-off-text="OFF" type="checkbox" value="1" name="bot-active-switch" id="bid-active-switch" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="portlet-body">

                                                <div class="scroller" style="height:350px" data-rail-visible="1" data-rail-color="blue" data-handle-color="red">

                                                    <table style="border-spacing: 10px; border-collapse: separate;">
                                                        <tbody>
                                                        <tr>
                                                            <td style="width: 10%; vertical-align: middle; text-align: left;">
                                                                Review last:
                                                            </td>
                                                            <td style="width: 30%; vertical-align: middle; text-align: left;">

                                                                <select id="reviewLast" class="form-control" disabled>
                                                                    <option value="24">24 Hours</option>
                                                                    <option value="48">48 Hours</option>
                                                                    <option value="72">72 Hours</option>
                                                                </select>

                                                            </td>
                                                            <td style="width: 30%; vertical-align: middle; text-align: center;">
                                                                Conversions
                                                            </td>
                                                            <td colspan="2" style="width: 30%; vertical-align: middle; text-align: left;">

                                                                <input type="text" class="form-control" id="bidMinimumConversions" disabled>

                                                            </td>
                                                        </tr>
                                                    </table>

                                                    <table style="border-spacing: 10px; border-collapse: separate;">
                                                        <tbody id="appendConditionDisplay"></tbody>

                                                        <tr>

                                                        </tr>
                                                        <tr>
                                                            <td colspan="2"><button class="btn btn-info btn-xs" id="appendConditionBtn" disabled><i class="fa fa-plus"></i> Add Condition</button></td>
                                                        </tr>




                                                        </tbody>

                                                    </table>

                                                    <hr>

                                                    <div class="form-group">

                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="blacklistDatePicker">Start from:</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                                <input type="text" value="{{ dateNow }}" class="form-control date-picker" placeholder="mm/dd/yyyy" id="bidDatePicker" disabled>
                                                            </div><!-- input-group -->
                                                        </div>


                                                        <div class="col-md-5 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for=blacklistDatePicker">&nbsp;</label>
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                                                                <input id="bidTimePicker" type="text" class="form-control timepicker timepicker-24" disabled/>
                                                            </div><!-- input-group -->
                                                        </div>

                                                        <br>
                                                        <div class="col-md-7 col-sm-6 col-xs-12">
                                                            <label style="font-weight: normal;" for="blacklistChooseTimeFormat">Frequency:</label>
                                                            <br>
                                                            <div class="input-group col-lg-12">
                                                                Hours:
                                                                <input type="text" class="form-control" id="bidFrequency" value="5" onkeypress="return isNumberKey(event)" disabled>
                                                                <input type="hidden" id="ajaxAppenedReturnCount">

                                                            </div><!-- input-group -->
                                                        </div>
                                                    </div>


                                                    <div class="col-md-12">
                                                        <hr>

                                                        <button class="btn btn-info btn-md pull-right spinnerBtn ladda-button" id="bidSubmitBtn" disabled data-style="expand-right" data-size="l"><i class="fa fa-pencil"></i><span class="ladda-label"> Save </span> </button>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div><!-- end bid adjustment rules -->
                                    {% if page == 'ExoClick' %}
                                </div></div>
                            {% endif %}
                            <!-- END Portlet PORTLET-->
                        </div>
                        <!-- Placement Table -->
                        <div class="col-lg-12">
                            <table class="table table-striped table-bordered table-hover dt-responsive table-checkable order-column table-header-fixed" width="100%" id="datatable-responsive">
                                <thead class="bg-primary">
                                <tr>
                                    <th>Placements </th>
                                    <th>Yesterday</th>
                                    <th>3 Day</th>
                                    <th>7 Day</th>
                                    <th>Conversions </th>
                                    <th>Revenue </th>
                                    <th>Cost </th>
                                    <th>Profit </th>
                                    <th>CPV </th>
                                    <th>EPV </th>
                                    <th>ROI </th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>

                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('assets/global/plugins/autosize/autosize.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/select2/js/select2.full.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/moment.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/clockface/js/clockface.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/pages/scripts/components-date-time-pickers.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/pages/scripts/components-bootstrap-switch.min.js') }}" type="text/javascript"></script>
    <script>
        Ladda.bind( '.spinnerBtn' );
    </script>
    <script type="text/javascript">

        var ComponentsSelect2 = function() {

            var handleDemo = function() {

                // Set the "bootstrap" theme as the default theme for all Select2
                // widgets.
                //
                // @see https://github.com/select2/select2/issues/2927
                $.fn.select2.defaults.set("theme", "bootstrap");

                $("#selectCampaign").select2({
                    allowClear: true,
                    placeholder: 'Select Campaign',
                    width: null
                });

                $("#selectAddGroup").select2({
                    allowClear: true,
                    placeholder: 'Select Group',
                    width: null
                });

                $("#selectAddVertical").select2({
                    allowClear: true,
                    placeholder: 'Select Vertical',
                    width: null
                });




                // @see https://select2.github.io/examples.html#data-ajax
                function formatRepo(repo) {
                    if (repo.loading) return repo.text;

                    var markup = "<div class='select2-result-repository clearfix'>" +
                            "<div class='select2-result-repository__avatar'><img src='" + repo.owner.avatar_url + "' /></div>" +
                            "<div class='select2-result-repository__meta'>" +
                            "<div class='select2-result-repository__title'>" + repo.full_name + "</div>";

                    if (repo.description) {
                        markup += "<div class='select2-result-repository__description'>" + repo.description + "</div>";
                    }

                    markup += "<div class='select2-result-repository__statistics'>" +
                    "<div class='select2-result-repository__forks'><span class='glyphicon glyphicon-flash'></span> " + repo.forks_count + " Forks</div>" +
                    "<div class='select2-result-repository__stargazers'><span class='glyphicon glyphicon-star'></span> " + repo.stargazers_count + " Stars</div>" +
                    "<div class='select2-result-repository__watchers'><span class='glyphicon glyphicon-eye-open'></span> " + repo.watchers_count + " Watchers</div>" +
                    "</div>" +
                    "</div></div>";

                    return markup;
                }

                function formatRepoSelection(repo) {
                    return repo.full_name || repo.text;
                }

                $(".js-data-example-ajax").select2({
                    width: "off",
                    ajax: {
                        url: "https://api.github.com/search/repositories",
                        dataType: 'json',
                        delay: 250,
                        data: function(params) {
                            return {
                                q: params.term, // search term
                                page: params.page
                            };
                        },
                        processResults: function(data, page) {
                            // parse the results into the format expected by Select2.
                            // since we are using custom formatting functions we do not need to
                            // alter the remote JSON data
                            return {
                                results: data.items
                            };
                        },
                        cache: true
                    },
                    escapeMarkup: function(markup) {
                        return markup;
                    }, // let our custom formatter work
                    minimumInputLength: 1,
                    templateResult: formatRepo,
                    templateSelection: formatRepoSelection
                });

                $("button[data-select2-open]").click(function() {
                    $("#" + $(this).data("select2-open")).select2("open");
                });

                $(":checkbox").on("click", function() {
                    $(this).parent().nextAll("select").prop("disabled", !this.checked);
                });

                // copy Bootstrap validation states to Select2 dropdown
                //
                // add .has-waring, .has-error, .has-succes to the Select2 dropdown
                // (was #select2-drop in Select2 v3.x, in Select2 v4 can be selected via
                // body > .select2-container) if _any_ of the opened Select2's parents
                // has one of these forementioned classes (YUCK! ;-))
                $(".select2, .select2-multiple, .select2-allow-clear, .js-data-example-ajax").on("select2:open", function() {
                    if ($(this).parents("[class*='has-']").length) {
                        var classNames = $(this).parents("[class*='has-']")[0].className.split(/\s+/);

                        for (var i = 0; i < classNames.length; ++i) {
                            if (classNames[i].match("has-")) {
                                $("body > .select2-container").addClass(classNames[i]);
                            }
                        }
                    }
                });

                $(".js-btn-set-scaling-classes").on("click", function() {
                    $("#select2-multiple-input-sm, #select2-single-input-sm").next(".select2-container--bootstrap").addClass("input-sm");
                    $("#select2-multiple-input-lg, #select2-single-input-lg").next(".select2-container--bootstrap").addClass("input-lg");
                    $(this).removeClass("btn-primary btn-outline").prop("disabled", true);
                });
            }

            return {
                //main function to initiate the module
                init: function() {
                    handleDemo();
                }
            };

        }();

        if (App.isAngularJsApp() === false) {
            jQuery(document).ready(function() {
                ComponentsSelect2.init();

                // Import modal

                $('#importCampaignBtn').click(function(){
                    $('#import-modal').modal('show');
                    $data = {
                        trafficName: '{{ page }}',
                        tid: {{ tid }}
                    }
                    apiGetCampaign($data);
                });

                $('#importCampaignBtnSave').on('click', function(){
                    $btnSpinner = $(this)[0];
                    var data = {items:[]};
                    var tid = {{ tid }};
                    $i = 0;
                    $x = 0;
                    $('input:checkbox.camp-record').each(function () {


                        if($(this).is(':checked') == true){
                            var voluumId = (this.checked ? $(this).data('voluumid') : "");
                            var campId = (this.checked ? $(this).data('campid') : "");
                            var campName = (this.checked ? $(this).data('campname') : "");
                            var geo = (this.checked ? $(this).data('geo') : "");
                            if(typeof campId != 'undefined'){
                                if(campId != 0){
                                    data.items.push({tid: tid, vid: encodeURIComponent(voluumId), campId:  encodeURIComponent(campId), campName: campName, geo: geo});
                                }

                            }


                            $x++;
                        }

                    });

                    console.log(data.items);

                    if($x > 0){
                        apiAddCampaign($btnSpinner, {{ tid }} ,data);
                    }else{
                        showNotification('warning', 'Warning', 'Please select campaign to import');
                    }


                });

                // End import modal


                // Add/Remove Group Buttons
                $('#addGroupBtn').tooltip({title: "<div class='row'><div class='col-lg-12'>Group<br><input class='form-control' type='text' id='group-value'/><br><hr><a onClick='insertGroup(this)' id='save_group' class='btn btn-info btn-xs spinnerBtn ladda-button' data-style='expand-right' data-size='xs'><span class='ladda-label'>Add</span></a><br><br></div></div>", html: true, placement: "top", trigger: "click"});
                $('#addGroupBtn').on('click', function(){
                    $('#group-value').focus();});


                $('#removeGroupBtn').tooltip({title: "<div style='width: 150px;' class='row'>" +
                "<div class='col-lg-12'>Select group" +
                "<br>" +
                "<select id='selectRemoveGroup' class='form-control'>" +
                "</select>" +
                "<br><hr><a onClick='removeGroup(this)' id='remove_group' class='btn btn-info btn-xs spinnerBtn ladda-button' data-style='expand-right' data-size='xs'><span class='ladda-label'>Remove</span></a>" +
                "<br><br></div></div>", html: true, placement: "top", trigger: "click"});

                $('#removeGroupBtn').on('click', function(){
                    getGroups();
                });


                $('#addVerticalBtn').tooltip({title: "<div class='row'><div class='col-lg-12'>Vertical<br><input class='form-control' type='text' id='vertical-value'/><br><hr><a onClick='insertVertical(this)' id='save_vertical' class='btn btn-info btn-xs spinnerBtn ladda-button' data-style='expand-right' data-size='s' ><span class='ladda-label'>Add</span></a><br><br></div></div>", html: true, placement: "top", trigger: "click"});
                $('#addVerticalBtn').on('click', function(){
                    $('#vertical-value').focus();});


                $('#removeVerticalBtn').tooltip({title: "<div style='width: 150px;' class='row'>" +
                "<div class='col-lg-12'>Select vertical" +
                "<br>" +
                "<select id='selectRemoveVertical' class='form-control'>" +
                "</select>" +
                "<br><hr><a onClick='removeVertical(this)' id='remove_vertical' class='btn btn-info btn-xs spinnerBtn ladda-button' data-style='expand-right' data-size='s'  data-style='expand-right' data-size='s'>Remove</a>" +
                "<br><br></div></div>", html: true, placement: "top", trigger: "click"});

                $('#removeVerticalBtn').on('click', function(){
                    getVerticals();
                });

                // On change Campaign find match

                $('#selectCampaign').on('change', function(){
                    var geo = $('#selectCampaign option:selected').data('geo');
                    var selCamp = $('#selectCampaign').val();
                    var grpCamp = $('#selectAddGroup').val();
                    var verticalCamp = $('#selectAddVertical').val();
                    var geoCamp = $('#campGeo').val





                    $('#campGeo').val(geo);

                    console.log(geo);

                    getGroupCampaignMatch(selCamp);


                    if(selCamp != '' && grpCamp != '' && geoCamp != ''){
                        $('#campaignGroupBtn').attr('disabled', false);
                    }
                });


                $('#datatable-responsive').DataTable({
                    fixedHeader: true,
                    "bProcessing": true,
                    "bServerSide": true,
                    "bSort": false,
                    "sAjaxSource": "/campaign/get-placement-report",
                    "fnServerParams": function ( aoData ) {
                        aoData.push( {
                            "name": "vid", "value": $('#voluumId').val()
                        } );
                        aoData.push( {
                            "name": "trafficName", "value": "{{ page }}"
                        } );

                    },
                    responsive: true,
                    "iDisplayLength": 20,
                    "lengthMenu": [20, 25, 50, 75, 100],
                    dom: 'lrtip'
                    //dom: '<"wrapper"lBfrtip>',
                    //dom: '<lB<frt>ip>',


                });

            });
        }


        $('#deleteCampaignBtn').click(function(){
            $btnSpinner = "#deleteCampaignBtn-spinner";
            $currentCampaign = $('#campaignTitleName').html();
            $('#delete-modal').modal('show');
            $('#campaignToDelete').html($currentCampaign);
        });



        $('#deleteCampaignBtnSave').on('click', function(){
            $btnSpinner = $(this)[0];
            $cid = $('#campaignId').val();
            $traffic = {{ tid }};
            deleteCampaignGroup($btnSpinner, $cid, $traffic);
        });



        $('#selectAddGroup').on('change', function(){


            var selCamp = $('#selectCampaign').val();
            var grpCamp = $('#selectAddGroup').val();
            var geoCamp = $('#selectGeo').val();

            if(selCamp == ''){selCamp = 0;}
            if(grpCamp == ''){grpCamp = 0;}
            if(geoCamp == ''){geoCamp = 'XX';}


            if(selCamp != '' && grpCamp != '' && geoCamp != ''){
                $('#campaignGroupBtn').attr('disabled', false);
            }


        });


        $('#selectGeo').on('change', function(){
            var selCamp = $('#selectCampaign').val();
            var grpCamp = $('#selectAddGroup').val();
            var geoCamp = $('#selectGeo').val();

            if(selCamp == ''){selCamp = 0;}
            if(grpCamp == ''){grpCamp = 0;}
            if(geoCamp == ''){geoCamp = 'XX';}


            if(selCamp != '' && grpCamp != '' && geoCamp != ''){
                $('#campaignGroupBtn').attr('disabled', false);
            }
        });


        $('#campaignGroupBtn').click(function(){

            var selCamp = $('#selectCampaign').val();
            var grpCamp = $('#selectAddGroup').val();
            var verticalCamp = $('#selectAddVertical').val();
            var geoCamp = $('#campGeo').val();


            $btnSpinner = $(this)[0];


            addCampaignGroup($btnSpinner, selCamp, grpCamp, verticalCamp, geoCamp);
        });

        // functions

        /**
         * Bot Rules
         */

        var iBot = 0;
        var dataRulesBot = {items:{}};
        var handlerBot = setInterval(function(){
            var appendCount =  parseInt($('#ajaxAppenedReturnRuleSetCountBot').val());
            if(!isNaN(appendCount)){
                iBot = iBot + appendCount;
                console.log(iBot);
                clearInterval(handlerBot);
            }
        },200);

        $('#appendRuleSetBotBtn').click(function(){
            console.log(iBot);
            $('#appendRuleSetBot').append(
                    '<tr class="appendRuleSetBot" id="ruleSetBot'+iBot+'">' +
                    '<td>' +
                    '<table>' +

                    '<tr>' +
                    '<td><hr></td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td><button onClick="removeAppend(this)" class="btn btn-danger btn-xs removeConditionBot" data-index="' + iBot + '"><i class="glyphicon glyphicon-remove"></i> Remove Ruleset</button></td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>' +
                    '<table style="border-spacing: 10px; border-collapse: separate;" id="appendConditionsBot'+iBot+'">' +

                    '</table>' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td colspan="5"><a style="cursor: pointer;" onClick="appendConditions(this)" data-parent="ruleSetBot'+iBot+'" data-target="appendConditionsBot'+iBot+'" data-index="'+iBot+'">[add condition]</a></td>' +
                    '</tr>' +
                    '</table>' +
                    '</td>' +
                    '</tr>'
            );
            /*
             dataRulesBot.items.push({
             ruleSetBot: ruleSetBot
             });
             */
            dataRulesBot.items['ruleSetBot'+iBot] = {conditions:[]};


            iBot++;


        });


        function removeAppend(elem){
            var index = elem.dataset.index;

            $('#ruleSetBot'+index).fadeTo("fast",0.7, function(){
                $('#ruleSetBot'+index).remove();
                delete dataRulesBot.items['ruleSetBot'+index];
                // Animation complete.
            });


        }
        function removeAppendConditions(elem){
            var index = elem.dataset.index;
            var targetId = elem.dataset.targetid;
            $('#conditionsBot'+index+'_'+targetId).fadeTo("fast",0.7, function(){
                $('#conditionsBot'+index+'_'+targetId).remove();
                var s = 0;
                $.each(dataRulesBot.items['ruleSetBot'+index].conditions, function(x, val) {
                    if(typeof x != 'undefined'){
                        if(typeof val != 'undefined'){
                            if(val['targetIndex'] == index+'_'+targetId){
                                delete dataRulesBot.items['ruleSetBot'+index].conditions[s]
                            }
                        }


                    }
                    s++;

                });
                // console.log(dataRulesBot.items['ruleSetBot'+index].conditions['targetIndex']);
                //  delete dataRulesBot.items['ruleSetBot'+$index].conditions[targetId];
                // Animation complete.

            });


        }
        var iConBot = 0;
        var handlerIConBot = setInterval(function(){
            var conditionsCount =  parseInt($('#ajaxAppenedReturnConditionsCountBot').val());
            if(!isNaN(conditionsCount)){
                iConBot = iConBot + conditionsCount;
                console.log(iConBot);
                clearInterval(handlerIConBot);
            }
        },200);
        function appendConditions(elem){
            $parent = elem.dataset.parent;
            $target = elem.dataset.target;
            $index = elem.dataset.index;



            $('#'+$target).append(
                    '<tr id="conditionsBot'+$index+'_'+iConBot+'">' +
                    '<td style="width: 25%; vertical-align: middle; text-align: center">' +
                    '<select class="form-control" id="rulesVariablesBot'+$index+'_'+iConBot+'">' +
                    '<option style="text-align: center;" value="visits">Visits</option>' +
                    '<option value="cost">Cost</option>' +
                    '<option value="conversions">Conv</option>' +
                    '<option value="ctr">CTR</option>' +
                    '<option value="roi">ROI</option>' +
                    '</select>' +
                    '</td>' +
                    '<td style="width: 15%; vertical-align: middle; text-align: center">' +
                    '<select class="form-control" id="rulesOperatorsBot'+$index+'_'+iConBot+'" data-id="'+$index+'_'+iConBot+'" data-type="Bot" onchange="checkOperator(this)">' +
                    '<option value="lessthan"><</option>' +
                    '<option value="between">=</option>' +
                    '<option value="greaterthan">></option>' +
                    '</select>' +
                    '</td>' +
                    '<td style="width: 25%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" id="rulesFirstValueBot'+$index+'_'+iConBot+'" onkeypress="return isNumberKey(event)">' +
                    '</td>' +
                    '<td style="width: 25%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" id="rulesSecondValueBot'+$index+'_'+iConBot+'" onkeypress="return isNumberKey(event)" disabled>' +
                    '</td>' +
                    '<td style="width: 10%; vertical-align: middle;">' +
                    '<button class="btn btn-danger btn-xs" onClick="removeAppendConditions(this)" data-targetid="' + iConBot + '" data-index="'+$index+'"><i class="glyphicon glyphicon-remove"></i></button>' +
                    '</td>' +
                    '</tr>'
            );

            dataRulesBot.items['ruleSetBot'+$index].conditions.push({
                targetIndex: $index+'_'+iConBot,
                rulesVariablesBot: 'rulesVariablesBot'+$index+'_'+iConBot,
                rulesOperatorsBot: 'rulesOperatorsBot'+$index+'_'+iConBot,
                rulesFirstValueBot: 'rulesFirstValueBot'+$index+'_'+iConBot,
                rulesSecondValueBot: 'rulesSecondValueBot'+$index+'_'+iConBot
            });

            iConBot++;


        }



        $('#botRulesSubmitBtn').click(function(){
            $btnSpinner = $(this)[0];
            var objectRulesBot = {options:[], items:{}};
            $hours = $('#chooseTimeFormat1').is(':checked');
            $minutes = $('#chooseTimeFormat2').is(':checked');
            if($hours == true){
                $frequency = $('#botRulesFrequency').val() * 3600;
            }
            if($minutes == true){
                $frequency = $('#botRulesFrequency').val() * 60;
            }

            if($('#bot-active-switch').is(':checked') == true){
                $isActive = 1;
            }else {
                $isActive = 0;
            }

            objectRulesBot.options.push({
                cgid: parseInt($('#campaignGroupId').val()),
                active: $isActive,
                startDate: $('#botRulesDatePicker').val(),
                startTime: $('#botRulesTimePicker').val(),
                frequency: $frequency
            })


            $.each(dataRulesBot, function(i, val) {
                if(val != 'undefined'){
                    $.each(val, function(prop, cont) {
                        objectRulesBot.items[prop] = {conditions:[]};
                        $.each(cont.conditions, function(index, value) {
                            if(typeof value != 'undefined'){
                                objectRulesBot.items[prop].conditions.push({
                                    variable: $('#' + value['rulesVariablesBot']).val(),
                                    operator: $('#' + value['rulesOperatorsBot']).val(),
                                    value1: $('#' + value['rulesFirstValueBot']).val(),
                                    value2: $('#' + value['rulesSecondValueBot']).val()

                                });
                            }


                        })
                    });
                }
            });

            console.log(objectRulesBot);


            addBotRule($btnSpinner, objectRulesBot);
            delete objectRulesBot.items;
            console.log(objectRulesBot);




        });


        /**
         * Blacklist Rules
         */

        var iBlacklist = 0;
        var dataRulesBlacklist = {items:{}};
        var handlerBlacklist = setInterval(function(){
            var appendCountBlacklist =  parseInt($('#ajaxAppenedReturnRuleSetCountBlacklist').val());
            if(!isNaN(appendCountBlacklist)){
                iBlacklist = iBlacklist + appendCountBlacklist;
                console.log(iBlacklist);
                clearInterval(handlerBlacklist);
            }
        },200);

        $('#appendRuleSetBlacklistBtn').click(function(){
            console.log(iBlacklist);
            $('#appendRuleSetBlacklist').append(
                    '<tr class="appendRuleSetBlacklist" id="ruleSetBlacklist'+iBlacklist+'">' +
                    '<td>' +
                    '<table>' +

                    '<tr>' +
                    '<td><hr></td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td><button onClick="removeAppendBlacklist(this)" class="btn btn-danger btn-xs removeConditionBlacklist" data-index="' + iBlacklist + '"><i class="glyphicon glyphicon-remove"></i> Remove Ruleset</button></td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td>' +
                    '<table style="border-spacing: 10px; border-collapse: separate;" id="appendConditionsBlacklist'+iBlacklist+'">' +

                    '</table>' +
                    '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td colspan="5"><a style="cursor: pointer;" onClick="appendConditionsBlacklist(this)" data-parent="ruleSetBlacklist'+iBlacklist+'" data-target="appendConditionsBlacklist'+iBlacklist+'" data-index="'+iBlacklist+'">[add condition]</a></td>' +
                    '</tr>' +
                    '</table>' +
                    '</td>' +
                    '</tr>'
            );
            /*
             dataRulesBot.items.push({
             ruleSetBot: ruleSetBot
             });
             */
            dataRulesBlacklist.items['ruleSetBlacklist'+iBlacklist] = {conditions:[]};


            iBlacklist++;


        });


        function removeAppendBlacklist(elem){
            var index = elem.dataset.index;

            $('#ruleSetBlacklist'+index).fadeTo("fast",0.7, function(){
                $('#ruleSetBlacklist'+index).remove();
                delete dataRulesBlacklist.items['ruleSetBlacklist'+index];
                // Animation complete.
            });


        }
        function removeAppendConditionsBlacklist(elem){
            var index = elem.dataset.index;
            var targetId = elem.dataset.targetid;
            $('#conditionsBlacklist'+index+'_'+targetId).fadeTo("fast",0.7, function(){
                $('#conditionsBlacklist'+index+'_'+targetId).remove();
                var s = 0;
                $.each(dataRulesBlacklist.items['ruleSetBlacklist'+index].conditions, function(x, val) {
                    if(typeof x != 'undefined'){
                        if(typeof val != 'undefined'){
                            if(val['targetIndex'] == index+'_'+targetId){
                                delete dataRulesBlacklist.items['ruleSetBlacklist'+index].conditions[s]
                            }
                        }


                    }
                    s++;

                });
                // console.log(dataRulesBot.items['ruleSetBot'+index].conditions['targetIndex']);
                //  delete dataRulesBot.items['ruleSetBot'+$index].conditions[targetId];
                // Animation complete.

            });


        }
        var iConBlacklist = 0;
        var handlerIConBlacklist = setInterval(function(){
            var conditionsCountBlacklist =  parseInt($('#ajaxAppenedReturnConditionsCountBlacklist').val());
            if(!isNaN(conditionsCountBlacklist)){
                iConBlacklist = iConBlacklist + conditionsCountBlacklist;
                console.log(iConBlacklist);
                clearInterval(handlerIConBlacklist);
            }
        },200);
        function appendConditionsBlacklist(elem){
            $parent = elem.dataset.parent;
            $target = elem.dataset.target;
            $index = elem.dataset.index;



            $('#'+$target).append(
                    '<tr id="conditionsBlacklist'+$index+'_'+iConBlacklist+'">' +
                    '<td style="width: 25%; vertical-align: middle; text-align: center">' +
                    '<select class="form-control" id="rulesVariablesBlacklist'+$index+'_'+iConBlacklist+'">' +
                    '<option style="text-align: center;" value="visits">Visits</option>' +
                    '<option value="cost">Cost</option>' +
                    '<option value="conversions">Conv</option>' +
                    '<option value="ctr">CTR</option>' +
                    '<option value="roi">ROI</option>' +
                    '</select>' +
                    '</td>' +
                    '<td style="width: 15%; vertical-align: middle; text-align: center">' +
                    '<select class="form-control" id="rulesOperatorsBlacklist'+$index+'_'+iConBlacklist+'" data-id="'+$index+'_'+iConBlacklist+'" data-type="Blacklist" onchange="checkOperator(this)">' +
                    '<option value="lessthan"><</option>' +
                    '<option value="between">=</option>' +
                    '<option value="greaterthan">></option>' +
                    '</select>' +
                    '</td>' +
                    '<td style="width: 25%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" id="rulesFirstValueBlacklist'+$index+'_'+iConBlacklist+'" onkeypress="return isNumberKey(event)">' +
                    '</td>' +
                    '<td style="width: 25%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" id="rulesSecondValueBlacklist'+$index+'_'+iConBlacklist+'" onkeypress="return isNumberKey(event)" disabled>' +
                    '</td>' +
                    '<td style="width: 10%; vertical-align: middle;">' +
                    '<button class="btn btn-danger btn-xs" onClick="removeAppendConditionsBlacklist(this)" data-targetid="' + iConBlacklist + '" data-index="'+$index+'"><i class="glyphicon glyphicon-remove"></i></button>' +
                    '</td>' +
                    '</tr>'
            );

            dataRulesBlacklist.items['ruleSetBlacklist'+$index].conditions.push({
                targetIndex: $index+'_'+iConBlacklist,
                rulesVariablesBlacklist: 'rulesVariablesBlacklist'+$index+'_'+iConBlacklist,
                rulesOperatorsBlacklist: 'rulesOperatorsBlacklist'+$index+'_'+iConBlacklist,
                rulesFirstValueBlacklist: 'rulesFirstValueBlacklist'+$index+'_'+iConBlacklist,
                rulesSecondValueBlacklist: 'rulesSecondValueBlacklist'+$index+'_'+iConBlacklist
            });

            iConBlacklist++;


        }



        $('#blacklistSubmitBtn').click(function(){
            $btnSpinner = $(this)[0];
            var objectRulesBlacklist = {options:[], items:{}};
            $pause = $('#blacklistRadioOption1').is(':checked');
            $resume = $('#blacklistRadioOption2').is(':checked');
            $action = '';
            if($pause == true){
                $action = 'pause';
            }
            if($resume == true){
                $action = 'resume';
            }
            $hours = $('#blacklistChooseTimeFormat1').is(':checked');
            $minutes = $('#blacklistChooseTimeFormat2').is(':checked');

            if($hours == true){
                $frequency = $('#blacklistFrequency').val() * 3600;
            }
            if($minutes == true){
                $frequency = $('#blacklistFrequency').val() * 60;
            }

            if($('#blacklist-active-switch').is(':checked') == true){
                $isActive = 1;
            }else {
                $isActive = 0;
            }

            objectRulesBlacklist.options.push({
                cgid: parseInt($('#campaignGroupId').val()),
                active: $isActive,
                action: $action,
                startDate: $('#blacklistDatePicker').val(),
                startTime: $('#blacklistTimePicker').val(),
                frequency: $frequency
            })

            $.each(dataRulesBlacklist, function(i, val) {
                if(typeof val != 'undefined'){
                    $.each(val, function(prop, cont) {
                        objectRulesBlacklist.items[prop] = {conditions:[]};
                        $.each(cont.conditions, function(index, value) {
                            if(typeof value != 'undefined'){
                                objectRulesBlacklist.items[prop].conditions.push({
                                    variable: $('#' + value['rulesVariablesBlacklist']).val(),
                                    operator: $('#' + value['rulesOperatorsBlacklist']).val(),
                                    value1: $('#' + value['rulesFirstValueBlacklist']).val(),
                                    value2: $('#' + value['rulesSecondValueBlacklist']).val()

                                });
                            }


                        })
                    });
                }
            });


            addBlackListRule($btnSpinner, objectRulesBlacklist);
            delete objectRulesBlacklist.items;
            console.log(objectRulesBlacklist);




        });


        /**
         * Ip Blacklist
         */
                {% if page == 'ExoClick' %}
        var iConIp = 0;
        var dataRulesIp = {items:[]};
        function removeAppendConditionsIp(elem){
            var targetId = elem.dataset.targetid;
            $('#conditionsIp'+targetId).fadeTo("fast",0.7, function(){
                $('#conditionsIp'+targetId).remove();
                delete dataRulesIp.items[targetId];
            });
            // console.log(dataRulesBot.items['ruleSetBot'+index].conditions['targetIndex']);

            // Animation complete.
        }
        var handlerIConIp = setInterval(function(){
            var conditionsCount =  parseInt($('#ajaxAppenedReturnConditionsCountIp').val());
            if(!isNaN(conditionsCount)){
                iConIp = iConIp + conditionsCount;
                console.log(iConIp);
                clearInterval(handlerIConIp);
            }
        },200);

        function appendConditionsIp(elem){
            console.log(iConIp);
            $parent = elem.dataset.parent;
            $index = elem.dataset.index;



            $('#appendRuleSetIp').append(
                    '<tr id="conditionsIp'+iConIp+'">' +
                    '<td style="vertical-align: middle; text-align: center">' +
                    '<select class="form-control" id="rulesVariablesIp'+iConIp+'">' +
                    {% for row in carriers %}
                    '<option value=\"{{ row.mobileCarrier }}\">"{{ row.mobileCarrier }}"</option>' +
                    {% endfor %}

                    '</select>' +
                    '</td>' +
                    '<td style="vertical-align: middle;">' +
                    '<button class="btn btn-danger btn-xs" onClick="removeAppendConditionsIp(this)" data-targetid="' + iConIp + '" data-index="'+$index+'"><i class="glyphicon glyphicon-remove"></i></button>' +
                    '</td>' +
                    '</tr>'
            );

            dataRulesIp.items.push({
                rulesVariablesIp: 'rulesVariablesIp'+iConIp
            });

            console.log(dataRulesIp.items);
            iConIp++;

        }



        $('#ipRulesSubmitBtn').click(function(){
            $btnSpinner = $(this)[0];
            var objectRulesIp = {options:[], items:[]};
            $hours = $('#ipChooseTimeFormat1').is(':checked');
            $minutes = $('#ipChooseTimeFormat2').is(':checked');
            if($hours == true){
                $frequency = $('#ipRulesFrequency').val() * 3600;
            }
            if($minutes == true){
                $frequency = $('#ipRulesFrequency').val() * 60;
            }

            if($('#ip-active-switch').is(':checked') == true){
                $isActive = 1;
            }else {
                $isActive = 0;
            }

            objectRulesIp.options.push({
                cgid: parseInt($('#campaignGroupId').val()),
                active: $isActive,
                frequency: $frequency
            })




            $.each(dataRulesIp, function(i, val) {
                if(typeof val != 'undefined'){

                    $.each(val, function(prop, cont) {
                        if(typeof  prop != 'undefined'){
                            if(typeof cont != 'undefined'){
                                objectRulesIp.items.push({ carrier: $('#'+cont['rulesVariablesIp']).val()});
                            }
                        }


                    });
                }
            });

            console.log(objectRulesIp);

            addIpRule($btnSpinner, objectRulesIp);
            delete objectRulesIp.items;
            console.log(objectRulesIp);




        });

        {% endif %}


        /**
         * Bid Adjustments
         */


        var i = 0;
        var data = {items:[]};
        var handler = setInterval(function(){
            var appendCount =  parseInt($('#ajaxAppenedReturnCount').val());
            if(!isNaN(appendCount)){
                i = i + appendCount;
                clearInterval(handler);
            }
        },200);

        $('#appendConditionBtn').click(function(){

            $('#appendConditionDisplay').append(
                    '<tr class="append" >' +
                    '<td style="width: 5%; vertical-align: middle;">' +
                    '<button class="btn btn-danger btn-xs removeCondition" data-index="' + i + '"><i class="glyphicon glyphicon-remove"></i></button>' +
                    '</td>' +
                    '<td style="width: 30%; vertical-align: middle; text-align: center">' +
                    '<div class="col-lg-4 label label-info" id="bidLessThan'+i+'" data-divId="'+i+'" onClick="updateConditionSelect(this)">' +
                    '<span class="pointer"><i class="fa fa-chevron-left"></i></span>' +
                    '</div>' +
                    '<div class="col-lg-4 align-center" id="bidBetween'+i+'" data-divId="'+i+'" onClick="updateConditionSelect(this)">' +
                    '<span class="pointer"><i class="fa fa-exchange"></i></span>' +
                    '</div>' +
                    '<div class="col-lg-4" id="bidGreaterThan'+i+'" data-divId="'+i+'" onClick="updateConditionSelect(this)">' +
                    '<span class="pointer"><i class="fa fa-chevron-right"></i></span>' +
                    '</div>' +
                    '</td>' +
                    '<td style="width: 20%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" placeholder="ROI" id="bidRoiFirstValue'+i+'" onkeypress="return isNumberKey(event)">' +
                    '</td>' +
                    '<td style="width: 20%; vertical-align: middle;">' +
                    '<input type="text" class="form-control" placeholder="ROI" id="bidRoiSecondValue'+i+'" onkeypress="return isNumberKey(event)" disabled>' +
                    '</td>' +
                    '<td style="width: 10%; vertical-align: middle; text-align: center">' +
                    '<div class="col-lg-12">' +
                    '<div class="col-lg-12 label label-info" id="bidIncrease'+i+'" data-divId="'+i+'" onClick="updateOptionSelect(this)">' +
                    '<span class="pointer"><i class="fa fa-chevron-up"></i></span>' +
                    '</div>' +
                    '<div class="col-lg-12" id="bidDecrease'+i+'" data-divId="'+i+'" onClick="updateOptionSelect(this)">' +
                    '<span class="pointer"><i class="fa fa-chevron-down"></i></span>' +
                    '</div>' +
                    '</div>' +
                    '</td>' +
                    '<td style="width: 15%; vertical-align: middle;">' +
                    '<input type="text" placeholder="BID" class="form-control" id="bidRoiPercentValue'+i+'" onkeypress="return isNumberKey(event)">' +
                    '</td>' +
                    '</tr>'
            );
            data.items.push({
                bidLessThan: 'bidLessThan' + i,
                bidBetween: 'bidBetween' + i,
                bidGreaterThan: 'bidGreaterThan' + i,
                bidRoiFirstValue: 'bidRoiFirstValue' + i,
                bidRoiSecondValue: 'bidRoiSecondValue' + i,
                bidIncrease: 'bidIncrease' + i,
                bidDecrease: 'bidDecrease' + i,
                bidRoiPercentValue: 'bidRoiPercentValue' + i
            });
            i++;

            $('.append').on('click', '.removeCondition', function(){
                var index = $(this).data('index');
                $(this).parent().fadeTo("fast",0.7, function(){
                    $(this).parent().remove();
                    delete data.items[index];
                    // Animation complete.
                    console.log(index);
                    console.log(data.items);
                });
            });

        });







        function updateConditionSelect(elem){
            var id = elem.getAttribute('data-divId');
            if(elem.id == 'bidLessThan'+id){
                $('#bidLessThan'+id).addClass('label label-info');
                $('#bidBetween'+id).removeClass('label label-info');
                $('#bidGreaterThan'+id).removeClass('label label-info');
                $('#bidRoiSecondValue'+id).attr('disabled', true);
                $('#bidRoiSecondValue'+id).val('');
            }else if(elem.id == 'bidBetween'+id){
                $('#bidLessThan'+id).removeClass('label label-info');
                $('#bidBetween'+id).addClass('label label-info');
                $('#bidGreaterThan'+id).removeClass('label label-info');
                $('#bidRoiSecondValue'+id).attr('disabled', false);
            }else if(elem.id == 'bidGreaterThan'+id){
                $('#bidLessThan'+id).removeClass('label label-info');
                $('#bidBetween'+id).removeClass('label label-info');
                $('#bidGreaterThan'+id).addClass('label label-info');
                $('#bidRoiSecondValue'+id).attr('disabled', true);
                $('#bidRoiSecondValue'+id).val('');
            }

        }

        function updateOptionSelect(elem){
            var id = elem.getAttribute('data-divId');
            if(elem.id == 'bidIncrease'+id){
                $('#bidIncrease'+id).addClass('label label-info');
                $('#bidDecrease'+id).removeClass('label label-info');
            }else if(elem.id == 'bidDecrease'+id){
                $('#bidIncrease'+id).removeClass('label label-info');
                $('#bidDecrease'+id).addClass('label label-info');
            }
        }


        $('#bidSubmitBtn').click(function(){
            var btn = $(this)[0];
            var object = {options:[], items:[]};
            object.options.push({
                cgid: $('#campaignGroupId').val(),
                active: $('#bid-active-switch').is(':checked'),
                reviewLast: $('#reviewLast').val(),
                bidMinimumConversions: $('#bidMinimumConversions').val(),
                startDate: $('#bidDatePicker').val(),
                startTime: $('#bidTimePicker').val(),
                frequency: $('#bidFrequency').val() * 3600
            })

            $.each(data.items, function(i, val) {
                if(typeof val != 'undefined'){
                    object.items.push({
                        bidLessThan: $('#'+val['bidLessThan']).hasClass('label label-info'),
                        bidBetween: $('#'+val['bidBetween']).hasClass('label label-info'),
                        bidGreaterThan: $('#'+val['bidGreaterThan']).hasClass('label label-info'),
                        bidRoiFirstValue: $('#'+val['bidRoiFirstValue']).val(),
                        bidRoiSecondValue: $('#'+val['bidRoiSecondValue']).val(),
                        bidIncrease: $('#'+val['bidIncrease']).hasClass('label label-info'),
                        bidDecrease: $('#'+val['bidDecrease']).hasClass('label label-info'),
                        bidRoiPercentValue: $('#'+val['bidRoiPercentValue']).val()
                    });
                }
            });

            console.log(object);



            addBidAdjustmentRule(btn, object);

            delete object.items;

            //console.log(object);

        });




        function checkOperator(elem){
            var indexId = elem.getAttribute('data-id');
            var type = elem.getAttribute('data-type');
            var condition = elem.value;

            if(condition == 'between'){
                $('#rulesSecondValue'+type + indexId).attr('disabled', false);
            }else{
                $('#rulesSecondValue'+type + indexId).attr('disabled', true);
            }
        }


        function insertGroup(elem){
            var val = document.getElementById('group-value').value;
            addGroup(elem, val);
        }

        function removeGroup(elem){
            var val = document.getElementById('selectRemoveGroup').value;
            deleteGroup(elem, val);

        }

        function insertVertical(elem){
            var val = document.getElementById('vertical-value').value;
            addVertical(elem, val);

        }

        function removeVertical(elem){
            var val = document.getElementById('selectRemoveVertical').value;
            deleteVertical(elem, val);

        }
        function resetBlacklistSettings(){
            $('#blacklistCheckBoxVisits').prop("checked", false);
            $('#blacklistCheckBoxCost').prop("checked", false);
            $('#blacklistCheckBoxConv').prop("checked", false);
            $('#blacklistCheckBoxCTR').prop("checked", false);
            $('#blacklistCheckBoxROI').prop("checked", false);


            $('#blacklistVisitsLessThan').addClass('label label-info');
            $('#blacklistVisitsBetween').removeClass('label label-info');
            $('#blacklistVisitsGreaterThan').removeClass('label label-info');


            $('#blacklistVisits1').val('');
            $('#blacklistVisits2').val('');
            $('#blacklistCost1').val('');
            $('#blacklistCost2').val('');
            $('#blacklistConv1').val('');
            $('#blacklistConv2').val('');
            $('#blacklistCTR1').val('');
            $('#blacklistCTR2').val('');
            $('#blacklistROI1').val('');
            $('#blacklistROI2').val('');

            $('#blacklistCostLessThan').addClass('label label-info');
            $('#blacklistCostBetween').removeClass('label label-info');
            $('#blacklistCostGreaterThan').removeClass('label label-info');


            $('#blacklistConvLessThan').addClass('label label-info');
            $('#blacklistConvBetween').removeClass('label label-info');
            $('#blacklistConvGreaterThan').removeClass('label label-info');


            $('#blacklistCTRLessThan').addClass('label label-info');
            $('#blacklistCTRBetween').removeClass('label label-info');
            $('#blacklistCTRGreaterThan').removeClass('label label-info');

            $('#blacklistROILessThan').addClass('label label-info');
            $('#blacklistROIBetween').removeClass('label label-info');
            $('#blacklistROIGreaterThan').removeClass('label label-info');


            $('#blacklistFrequency').attr('disabled', true);
            $('#blacklistTimePicker').attr('disabled', true);
            $('#blacklistTimePicker').val('00:00');
            $('#blacklistChooseTimeFormat1').attr('disabled', true);
            $('#blacklistChooseTimeFormat2').attr('disabled', true);


            $('#blacklistVisits2').attr('disabled', true);

            $('#blacklistCost2').attr('disabled', true);

            $('#blacklistConv2').attr('disabled', true);

            $('#blacklistCTR2').attr('disabled', true);

            $('#blacklistROI2').attr('disabled', true);
        }


        {% if page == 'Zeropark' %}
        function setDataAttribute(elem) {
            var i = elem.dataset.selectid;
            var campid = elem.value;
            var checkBoxId = document.getElementById('checkBoxId_' + i);
            checkBoxId.dataset.campid = campid;
        }
        {% endif %}

    </script>


    <!-- AJAX CALLS -->
    <script src="{{ asset('assets/ajax/campaign/campaign.js') }}" type="text/javascript"></script>
    <!-- END AJAX CALLS -->
{% endblock %}
